:root{
  --bg:#0f1320; --panel:#11182b; --accent:#2dd4bf; --text:#eaf0ff; --muted:#9fb0d0;
}
*{box-sizing:border-box}
html,body,#map{height:100%;margin:0}
body{font-family:system-ui,Segoe UI,Roboto,Ubuntu,Arial;background:var(--bg);color:var(--text)}
#map{position:absolute;inset:54px 320px 0 0}

.topbar{
  position:fixed;top:0;left:0;right:320px;height:54px;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 12px;background:linear-gradient(90deg,#0f1320,#131a31 60%);
  z-index:1000;border-bottom:1px solid #1f2a44
}
.brand{font-weight:700;letter-spacing:.3px;display:flex;align-items:center;gap:8px}
.brand .dot{width:10px;height:10px;background:var(--accent);border-radius:999px;display:inline-block}
.controls{display:flex;gap:8px;align-items:center}
.controls button{
  background:#0f162b; color:var(--text);
  border:1px solid #263152; padding:8px 10px; border-radius:10px; cursor:pointer
}
.controls button:hover{border-color:var(--accent)}
.small{font-size:12px}.muted{color:var(--muted)}

/* Panel lateral */
#panel{
  position:fixed;top:0;right:0;width:320px;height:100%;
  background:var(--panel);border-left:1px solid #263152;
  display:flex;flex-direction:column;z-index:1100
}
.panel-header{padding:10px 12px;border-bottom:1px solid #263152}
.bus-head{display:flex;gap:10px;align-items:center}
.bus-head img{width:56px;height:56px;border-radius:10px;border:1px solid #263152;background:#0e1428}
#p-body{padding:12px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.k{display:block;font-size:12px;color:var(--muted)}
.v{display:block;font-weight:700}
.legend{display:flex;gap:10px;margin-top:12px;color:var(--muted)}
.chip{display:inline-block;width:12px;height:12px;border-radius:3px;margin-right:6px}
.chip-bus{background:#2dd4bf}
.chip-stop{background:#38bdf8}
.chip-route{background:#9ca3af}
.leaflet-control-attribution{background:transparent;color:#a7b2cb}

/* Marker bus como DivIcon para mejor rendimiento */
.bus-marker{display:flex;align-items:center;justify-content:center}
.bus-marker img{width:36px;height:36px;border-radius:10px;border:1px solid #25324f;box-shadow:0 2px 6px rgba(0,0,0,.3)}

@media (max-width:900px){
  #map{inset:108px 0 0 0}
  .topbar{right:0;height:auto;flex-wrap:wrap;gap:8px;padding:8px}
  #panel{position:fixed;bottom:0;top:auto;height:220px;width:100%;right:0}
}
